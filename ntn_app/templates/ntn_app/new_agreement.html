{% extends "ntn_app/base.html" %} {% load static %} {% block body %}

<link href="{% static '/ntn_app/css/agreement.css' %}" rel="stylesheet" />

<div class="container">
  <h2>Articulation and Transfer Forms</h2>
  <form method="post" id="agreementForm">
    {% csrf_token %}

    <h3>Articulation Agreement</h3>
    <p>
      <strong>TRANSFER AGREEMENT</strong><br />
      Between
      <input
        type="text"
        name="university"
        placeholder="4-Year University Name"
        class="form-input-small"
        oninput="autoUpdateFields('university')"
      />
      and
      <input
        type="text"
        name="college"
        placeholder="2-Year College Name"
        class="form-input-small"
        oninput="autoUpdateFields('college')"
      />
    </p>
    <p>
      For Transfer of
      <input
        type="text"
        name="college_program"
        placeholder="Program at 2-Year College"
        class="form-input-small"
        oninput="autoUpdateFields('college_program')"
      />
      to
      <input
        type="text"
        name="university_program"
        placeholder="Program at 4-Year University"
        class="form-input-small"
        oninput="autoUpdateFields('university_program')"
      />
    </p>

    <h3>Statement of Purpose:</h3>
    <p>
      The purpose of this transfer agreement is to provide a basis for a
      cooperative relationship between
      <input type="text" name="university_duplicate" class="form-input-small" />
      and
      <input type="text" name="college_duplicate" class="form-input-small" />
      to benefit students who desire to complete a bachelor’s degree. The intent
      is for students completing the
      <input
        type="text"
        name="college_program_duplicate"
        class="form-input-small"
        oninput="autoUpdateFields('college_program')"
      />
      at
      <input type="text" name="college_duplicate" class="form-input-small" />
      to move seamlessly to the
      <input
        type="text"
        name="university_program_duplicate"
        class="form-input-small"
      />
      at
      <input
        type="text"
        name="university_duplicate"
        class="form-input-small"
      />.
    </p>

    <h3>Transfer Agreement:</h3>
    <p>
      Graduates from the appended
      <input
        type="text"
        name="college_program_duplicate"
        class="form-input-small"
      />
      program of study in
      <input
        type="text"
        name="field_of_study"
        placeholder="Field of Study"
        class="form-input-small"
      />
      from any campus may transfer and apply
      <input
        type="text"
        name="credits"
        placeholder="Credit Hours"
        class="form-input-small"
      />
      credit hours from that completed degree to the requirements for the
      <input
        type="text"
        name="university_program_duplicate"
        class="form-input-small"
      />
      at
      <input
        type="text"
        name="university_duplicate"
        class="form-input-small"
      />.
    </p>

    <p>
      Additionally, under the terms of this agreement:<br />
      1. Students are eligible for admission with junior standing provided:<br />
      a. They have submitted a complete application for admission.<br />
      b. A course grade of “C” or better must be earned to be accepted for
      transfer.<br />
      c. They have a
      <input
        type="text"
        name="gpa_required"
        placeholder="GPA Requirement"
        class="form-input-small"
      />
      or higher grade point average on a 4-point scale.
    </p>
    <p>
      2. As graduates complete the credit hour requirements for the award of the
      <input
        type="text"
        name="university_program_duplicate"
        class="form-input-small"
      />
      they must meet the graduation requirements as approved by
      <input type="text" name="university_duplicate" class="form-input-small" />
      at the time of the student’s admission to the program.
    </p>

    <h3>Course Transfer Details</h3>
    <table id="courseTable">
      <thead>
        <tr>
          <th>College Course Subject Code</th>
          <th>College Course Digit Code</th>
          <th>Credits</th>
          <th>University Course Subject Code</th>
          <th>University Course Digit Code</th>
          <th>Credits</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <input type="text" name="courses[0][cc_subject]" />
          </td>
          <td>
            <input type="text" name="courses[0][cc_digit]" />
          </td>
          <td>
            <input type="text" name="courses[0][cc_credits]" />
          </td>
          <td>
            <input type="text" name="courses[0][uc_subject]" />
          </td>
          <td>
            <input type="text" name="courses[0][uc_digit]" />
          </td>
          <td>
            <input type="text" name="courses[0][uc_credits]" />
          </td>
          <td>
            <button type="button" onclick="removeRow(this)">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>

    <button type="button" onclick="addRow()">Add Row</button>

    <button type="submit">Submit Agreement</button>
  </form>
</div>

<script>
  function autoUpdateFields(fieldName) {
    // Find the main input field by name
    const mainField = document.querySelector(`input[name="${fieldName}"]`);
    const value = mainField ? mainField.value : "";

    // Select all duplicate fields with the same name
    const duplicateFields = document.querySelectorAll(
      `input[name="${fieldName}_duplicate"]`
    );

    // Update each duplicate field's value
    duplicateFields.forEach((duplicateField) => {
      if (duplicateField !== mainField) {
        duplicateField.value = value;
      }
    });
  }

  function addRow() {
    const table = document
      .getElementById("courseTable")
      .getElementsByTagName("tbody")[0];
    const index = table.rows.length; // Get current number of rows to index correctly
    const newRow = table.insertRow(-1);
    newRow.innerHTML = `
  		<td><input type="text" name="courses[${index}][cc_subject]"></td>
      <td><input type="text" name="courses[${index}][cc_digit]"></td>          
  		<td><input type="text" name="courses[${index}][cc_credits]"></td>
  		<td><input type="text" name="courses[${index}][uc_subject]"></td>
      <td><input type="text" name="courses[${index}][uc_digit]"></td>
  		<td><input type="text" name="courses[${index}][uc_credits]"></td>
  		<td><button type="button" onclick="removeRow(this)">Remove</button></td>
  	`;
  }

  function removeRow(btn) {
    var row = btn.parentNode.parentNode;
    row.parentNode.removeChild(row);
  }
</script>

{% endblock %}

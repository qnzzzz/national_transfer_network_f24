{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="{% static 'ntn_app/css/login.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'ntn_app/css/base_institutions.css' %}" />
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar">
    <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="/">
          <img src="{% static 'ntn_app/images/logo.png' %}" width="50px" />
            <span class="ms-2">National Transfer Network</span>
        </a>
        <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!-- Left-aligned items -->
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 d-flex align-items-center">
              {% comment %} <li class="nav-item ms-3">
                <a class="nav-link" href="{% url 'explore_universities' %}">Explore Institutions</a> <!-- Explore Institutions to the right -->
            </li> {% endcomment %}
            <li class="nav-item ms-3">
              <a class="nav-link" aria-current="page" href="{% url 'student_profile' %}">Profile</a>
          </li>
            </ul>

            <!-- Right-aligned items -->
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0 d-flex align-items-center">
                <li class="nav-item">
                    <span class="navbar-text">Welcome Back {{ user.first_name }} {{ user.last_name }}!</span> <!-- Welcome message in center -->
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'student_logout' %}">Logout</a> <!-- Move Logout to the left -->
              </li>

            </ul>
        </div>
    </div>
</nav>

<div class="container mt-5">
  <h1>Explore Institutions</h1>
  <form method="post" action="{% url 'handle_college_selection' %}">
      {% csrf_token %}
      <div class="row mb-3">
          <div class="col-md-6">
              <label for="institution_type" class="form-label">Choose Institution Type</label>
              <select id="institution_type" name="institution_type" class="form-control">
                  <option value="">Select Institution Type</option>
                  <option value="four_year_university">Four Year University</option>
                  <option value="two_year_college">Two Year College</option>
              </select>
          </div>
      </div>
      <div class="row mb-3">
          <div class="col-md-6">
              <label for="institution" class="form-label">Select Institution you are interested in</label>
              <select id="institution" name="institution" class="form-control">
                  <option value="">Select Institution</option>
              </select>
          </div>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>

<script>
  $(document).ready(function() {
      $('#institution_type').change(function() {
          var institutionType = $(this).val();
          $.ajax({
              url: "{% url 'get_institutions' %}",
              data: {
                  'institution_type': institutionType
              },
              success: function(data) {
                  var institutionSelect = $('#institution');
                  institutionSelect.empty();
                  institutionSelect.append('<option value="">Select Institution</option>');
                  $.each(data, function(index, item) {
                      var name = item.college_name || item.university_name;
                      institutionSelect.append('<option value="' + item.id + '">' + name + '</option>');
                  });
              }
          });
      });
  
  });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>





